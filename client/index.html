<!DOCTYPE html>
<html lang="en">
    <head>
        <title>LifeStyle</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link 
            rel="stylesheet" 
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" 
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" 
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="style.css" />

        <script 
            src="https://code.jquery.com/jquery-3.5.1.slim.min.js" 
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous">
        </script>
        <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" 
        crossorigin="anonymous">
        </script>
        <script src="script.js" defer></script>
    </head>
    <body>
    <div class="video-wrap">
        <video id="video" playsinline autoplay></video>
    </div>
    <div class="controller">
        <button class="button button1">
            Click On Me To Take A Picture Of The Product
        </button> 
    </div>
    <canvas id="canvas" width="640" height="480"></canvas> 
    <script>
        'use strict'
    
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const snap = document.getElementById('snap');
        const errorMsgElement = document.getElementById('span#ErrorMsg');
        
        const constraints = {
            audio: true,
            video:{
                width: 1280, height: 720
            }
        };
        
        async function init(){
            try{
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                handleSucess(stream);
            }
            catch(e){
                errorMsgElement.innerHTML = `navigator.getUserMedia.error:${e.toString()}`;
            }
        }
        
        function handleSucess(stream){
            window.stream = stream;
            video.srcObject = stream;
        }    

        init();
        
        var context = canvas.getContext('2d');
        snap.addEventListener("click",function(){
            context.drawImage(video, 0, 0, 640, 480);
        });
    </script>
    </body>
</html>
